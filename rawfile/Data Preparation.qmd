---
title: "Data Preparation"
format: html
author: "Baoyue Xing & Ruining Yang & Yan Wang"
affiliation: "University of Colorado Denver"
---
::: {.panel-tabset}

### Data Import


- Original Source: https://github.com/rfordatascience/tidytuesday/blob/main/data/2024/2024-02-13/readme.md

The data for this project is from 2010 to 2022, as organized by Suraj Das for a Kaggle dataset. The original purpose of this data is to explore a demographic breakdown of total spending, average spending, types of gifts planned and spending per type of gift. There are three dataset we used for this project: `historical_spending`,`gifts_age`,`gifts_gender`.

```{r, message=FALSE}
# Import datasets directly from GitHub

historical_spending <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2024/2024-02-13/historical_spending.csv')
gifts_age <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2024/2024-02-13/gifts_age.csv')
gifts_gender <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2024/2024-02-13/gifts_gender.csv')
```
- After our observation, we did not find missing value and extreme value, so we use it without cleaning the data for the following combination.

The original three datasets: 
historical_spending have 10 variables: Year, PercentCelebrating, PerPerson, Candy, Flowers, Jewelry, GreetingCards, EveningOut, Clothing, Giftcards.
Gift_age have 9 variables: Age, SpedingCelebrating, Candy, Flowers, Jewelry, GreetingCards, EverningOut, Clothing, Giftcards.
Gift_gender have 9 variables: Gender, SpedingCelebrating, Candy, Flowers, Jewelry, GreetingCards, EverningOut, Clothing, Giftcards
```{r}
dplyr:: glimpse(historical_spending)
```
```{r}
dplyr:: glimpse(gifts_age)
```
```{r}
dplyr:: glimpse(gifts_gender)
```

### Data Cleaning
- Because the problem we want to study is whether people pay more attention to short-term experiential items or long-term practical gifts, we classified the gifts into experiential and practical types according to the length of their service life. The experiential gifts types include: `evening_out`, `flowers`, `candy`, `greeting_cards`. The practical types include `jewelry`, `clothing`, `giftcards`. Then form three new dataset: `historaical_spending_grouped`, `gifts_age_grouped`, `gifts_gender_grouped`. Then we calculate the total spending by summing the cost of experiential gifts and practical gifts.

```{r}
historical_spending_grouped <- historical_spending |>
  transform(
    ExperientialSpending = EveningOut + Flowers + Candy + GreetingCards,
    PracticalSpending = Jewelry + Clothing + GiftCards
  ) |>
  subset(select = c(Year, PercentCelebrating, PerPerson, ExperientialSpending, PracticalSpending))
```

```{r}
historical_spending_grouped$TotalSpending <- historical_spending_grouped$ExperientialSpending +
                                              historical_spending_grouped$PracticalSpending
```

```{r}
gifts_age_grouped <- gifts_age |>
  transform(
    ExperientialSpending = EveningOut + Flowers + Candy + GreetingCards,
    PracticalSpending = Jewelry + Clothing + GiftCards
  ) |>
  subset(select = c(Age, SpendingCelebrating, ExperientialSpending, PracticalSpending))
```

```{r}
gifts_age_grouped$TotalSpending <- gifts_age_grouped$ExperientialSpending +
                                   gifts_age_grouped$PracticalSpending
```

```{r}
gifts_gender_grouped <- gifts_gender |>
  transform(
    ExperientialSpending = EveningOut + Flowers + Candy + GreetingCards,
    PracticalSpending = Jewelry + Clothing + GiftCards
  ) |>
  subset(select = c(Gender, ExperientialSpending, PracticalSpending))
```

```{r}
gifts_gender_grouped$TotalSpending <- gifts_gender_grouped$ExperientialSpending +
                                      gifts_gender_grouped$PracticalSpending
```
### Data Preview
```{r}
head(historical_spending_grouped)
```

```{r}
head(gifts_age_grouped)
```

```{r}
head(gifts_gender_grouped)
```
### Data Description

```{r,echo=FALSE}
library(readxl)
library(DT)

stat_summary <- read_excel("StatSummary.xlsx")

datatable(stat_summary, options = list(pageLength = 5))
```

:::

